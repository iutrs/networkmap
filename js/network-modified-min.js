"undefined"==typeof links&&(links={}),"undefined"==typeof google&&(google=void 0),links.Network=function(t){this.containerElement=t,this.width="100%",this.height="100%",this.refreshRate=50,this.stabilize=!0,this.selectable=!0,this.constants={nodes:{radiusMin:5,radiusMax:20,radius:5,distance:100,style:"rect",image:void 0,widthMin:16,widthMax:64,fontColor:"black",fontSize:14,fontFace:"arial",borderColor:"#2B7CE9",backgroundColor:"#97C2FC",highlightColor:"#D2E5FF",group:void 0},links:{widthMin:1,widthMax:15,width:1,style:"line",color:"#343434",fontColor:"#343434",fontSize:14,fontFace:"arial",length:100,dashlength:10,dashgap:5},packages:{radius:5,radiusMin:5,radiusMax:10,style:"dot",color:"#2B7CE9",image:void 0,widthMin:16,widthMax:64,duration:1},minForce:.05,minVelocity:.02,maxIterations:1e3},this.nodes=[],this.links=[],this.packages=[],this.images=new links.Network.Images,this.groups=new links.Network.Groups,this.hasMovingLinks=!1,this.hasMovingNodes=!1,this.hasMovingPackages=!1,this.selection=[],this.timer=void 0,this._create()},links.Network.prototype.draw=function(t,i,e,s){var o,r,n;if(void 0!=s?(o=t,r=i,n=e):void 0!=e?(o=t,r=i,n=void 0,s=e):void 0!=i?(o=t,r=void 0,n=void 0,s=i):void 0!=t&&(o=void 0,r=void 0,n=void 0,s=t),void 0!=s){if(void 0!=s.width&&(this.width=s.width),void 0!=s.height&&(this.height=s.height),void 0!=s.stabilize&&(this.stabilize=s.stabilize),void 0!=s.selectable&&(this.selectable=s.selectable),s.links){for(var a in s.links)s.links.hasOwnProperty(a)&&(this.constants.links[a]=s.links[a]);void 0!=s.links.length&&s.nodes&&void 0==s.nodes.distance&&(this.constants.links.length=s.links.length,this.constants.nodes.distance=1.25*s.links.length),s.links.fontColor||(this.constants.links.fontColor=s.links.color),void 0!=s.links.dashlength&&(this.constants.links.dashlength=s.links.dashlength),void 0!=s.links.dashgap&&(this.constants.links.dashgap=s.links.dashgap),void 0!=s.links.altdashlength&&(this.constants.links.altdashlength=s.links.altdashlength)}if(s.nodes)for(a in s.nodes)s.nodes.hasOwnProperty(a)&&(this.constants.nodes[a]=s.nodes[a]);if(s.packages)for(a in s.packages)s.packages.hasOwnProperty(a)&&(this.constants.packages[a]=s.packages[a]);if(s.groups)for(var h in s.groups)if(s.groups.hasOwnProperty(h)){var l=s.groups[h];this.groups.add(h,l)}}this._setBackgroundColor(s.backgroundColor),this._setSize(this.width,this.height),this._setTranslation(0,0),this._setScale(1),this.hasTimestamps=!1,this.setNodes(o),this.setLinks(r),this.setPackages(n),this._reposition(),this.stabilize&&this._doStabilize(),this.start();var d=this,p=function(){d._redraw()};this.images.setOnloadCallback(p),this.trigger("ready")},links.Network.prototype.trigger=function(t,i){links.events.trigger(this,t,i),google&&google.visualization&&google.visualization.events&&google.visualization.events.trigger(this,t,i)},links.Network.prototype._create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);if(this.frame=document.createElement("div"),this.frame.className="network-frame",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),!this.frame.canvas.getContext){var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}var i=this,e=function(t){i._onMouseDown(t)},s=function(t){i._onMouseMoveTitle(t)},o=function(t){i._onMouseWheel(t)},r=function(t){i._onTouchStart(t)};links.Network.addEventListener(this.frame.canvas,"mousedown",e),links.Network.addEventListener(this.frame.canvas,"mousemove",s),links.Network.addEventListener(this.frame.canvas,"mousewheel",o),links.Network.addEventListener(this.frame.canvas,"touchstart",r),this.containerElement.appendChild(this.frame)},links.Network.prototype._setBackgroundColor=function(t){var i="white",e="lightgray",s=1;if("string"==typeof t)i=t,e="none",s=0;else if("object"==typeof t)void 0!=t.fill&&(i=t.fill),void 0!=t.stroke&&(e=t.stroke),void 0!=t.strokeWidth&&(s=t.strokeWidth);else if(void 0!=t)throw"Unsupported type of backgroundColor";this.frame.style.boxSizing="border-box",this.frame.style.backgroundColor=i,this.frame.style.borderColor=e,this.frame.style.borderWidth=s+"px",this.frame.style.borderStyle="solid"},links.Network.prototype._onMouseDown=function(t){if(t=t||window.event,this.selectable&&(this.leftButtonDown&&this._onMouseUp(t),this.leftButtonDown=t.which?1==t.which:1==t.button,this.leftButtonDown||this.touchDown)){var i=this;this.onmousemove||(this.onmousemove=function(t){i._onMouseMove(t)},links.Network.addEventListener(document,"mousemove",i.onmousemove)),this.onmouseup||(this.onmouseup=function(t){i._onMouseUp(t)},links.Network.addEventListener(document,"mouseup",i.onmouseup)),links.Network.preventDefault(t),this.startMouseX=t.clientX||t.targetTouches[0].clientX,this.startMouseY=t.clientY||t.targetTouches[0].clientY,this.startFrameLeft=links.Network._getAbsoluteLeft(this.frame.canvas),this.startFrameTop=links.Network._getAbsoluteTop(this.frame.canvas),this.startTranslation=this._getTranslation(),this.ctrlKeyDown=t.ctrlKey,this.shiftKeyDown=t.shiftKey;var e={left:this._xToCanvas(this.startMouseX-this.startFrameLeft),top:this._yToCanvas(this.startMouseY-this.startFrameTop),right:this._xToCanvas(this.startMouseX-this.startFrameLeft),bottom:this._yToCanvas(this.startMouseY-this.startFrameTop)},s=this._getNodesOverlappingWith(e);if(this.startClickedObj=s.length>0?s[s.length-1]:void 0,this.startClickedObj){var o=this.nodes[this.startClickedObj.row];this.startClickedObj.xFixed=o.xFixed,this.startClickedObj.yFixed=o.yFixed,o.xFixed=!0,o.yFixed=!0,this.ctrlKeyDown&&o.isSelected()?this._unselectNodes([this.startClickedObj]):this._selectNodes([this.startClickedObj],this.ctrlKeyDown),this.hasMovingNodes||this._redraw()}else this.shiftKeyDown||(this.moved=!1)}},links.Network.prototype._onMouseMove=function(t){if(t=t||window.event,this.selectable){var i=t.clientX||t.targetTouches&&t.targetTouches[0].clientX||0,e=t.clientY||t.targetTouches&&t.targetTouches[0].clientY||0;if(this.mouseX=i,this.mouseY=e,this.startClickedObj){var s=this.nodes[this.startClickedObj.row];this.startClickedObj.xFixed||(s.x=this._xToCanvas(i-this.startFrameLeft)),this.startClickedObj.yFixed||(s.y=this._yToCanvas(e-this.startFrameTop)),this.hasMovingNodes||(this.hasMovingNodes=!0,this.start())}else if(this.shiftKeyDown){void 0==this.frame.selRect&&(this.frame.selRect=document.createElement("DIV"),this.frame.appendChild(this.frame.selRect),this.frame.selRect.style.position="absolute",this.frame.selRect.style.border="1px dashed red");var o=Math.min(this.startMouseX,i)-this.startFrameLeft,r=Math.min(this.startMouseY,e)-this.startFrameTop,n=Math.max(this.startMouseX,i)-this.startFrameLeft,a=Math.max(this.startMouseY,e)-this.startFrameTop;this.frame.selRect.style.left=o+"px",this.frame.selRect.style.top=r+"px",this.frame.selRect.style.width=n-o+"px",this.frame.selRect.style.height=a-r+"px"}else{var h=i-this.startMouseX,l=e-this.startMouseY;this._setTranslation(this.startTranslation.x+h,this.startTranslation.y+l),this._redraw(),this.moved=!0}links.Network.preventDefault(t)}},links.Network.prototype._onMouseUp=function(t){if(t=t||window.event,this.selectable){this.onmousemove&&(links.Network.removeEventListener(document,"mousemove",this.onmousemove),this.onmousemove=void 0),this.onmouseup&&(links.Network.removeEventListener(document,"mouseup",this.onmouseup),this.onmouseup=void 0),links.Network.preventDefault(t);var i=t.clientX||this.mouseX||0,e=t.clientY||this.mouseY||0,s=t?t.ctrlKey:window.event.ctrlKey;if(this.startClickedObj){var o=this.nodes[this.startClickedObj.row];o.xFixed=this.startClickedObj.xFixed,o.yFixed=this.startClickedObj.yFixed}else if(this.shiftKeyDown){var r={left:this._xToCanvas(Math.min(this.startMouseX,i)-this.startFrameLeft),top:this._yToCanvas(Math.min(this.startMouseY,e)-this.startFrameTop),right:this._xToCanvas(Math.max(this.startMouseX,i)-this.startFrameLeft),bottom:this._yToCanvas(Math.max(this.startMouseY,e)-this.startFrameTop)},n=this._getNodesOverlappingWith(r);this._selectNodes(n,s),this.redraw(),this.frame.selRect&&(this.frame.removeChild(this.frame.selRect),this.frame.selRect=void 0)}else this.ctrlKeyDown||this.moved||(this._unselectNodes(),this._redraw());this.leftButtonDown=!1,this.ctrlKeyDown=!1}},links.Network.prototype._onMouseWheel=function(t){t=t||window.event;var i=t.clientX,e=t.clientY,s=0;if(t.wheelDelta?s=t.wheelDelta/120:t.detail&&(s=-t.detail/3),s){var o=s/10;0>s&&(o/=1-o);var r=this._getScale(),n=r*(1+o);.01>n&&(n=.01),n>10&&(n=10);var a=links.Network._getAbsoluteLeft(this.frame.canvas),h=links.Network._getAbsoluteTop(this.frame.canvas),l=i-a,d=e-h,p=this._getTranslation(),f=n/r,c=(1-f)*l+p.x*f,u=(1-f)*d+p.y*f;this._setScale(n),this._setTranslation(c,u),this._redraw()}links.Network.preventDefault(t)},links.Network.prototype._onMouseMoveTitle=function(t){t=t||window.event;var i=t.clientX,e=t.clientY;this.startFrameLeft=this.startFrameLeft||links.Network._getAbsoluteLeft(this.frame.canvas),this.startFrameTop=this.startFrameTop||links.Network._getAbsoluteTop(this.frame.canvas);var s=i-this.startFrameLeft,o=e-this.startFrameTop;this.popupNode&&this._checkHidePopup(s,o);var r=this,n=function(){r._checkShowPopup(s,o)};this.popupTimer&&clearInterval(this.popupTimer),this.leftButtonDown||(this.popupTimer=setTimeout(n,300))},links.Network.prototype._checkShowPopup=function(t,i){var e,s,o={left:this._xToCanvas(t),top:this._yToCanvas(i),right:this._xToCanvas(t),bottom:this._yToCanvas(i)},r=this.popupNode;if(void 0==this.popupNode)for(e=0,s=this.packages.length;s>e;e++){var n=this.packages[e];if(void 0!=n.getTitle()&&n.isOverlappingWith(o)){this.popupNode=n;break}}if(void 0==this.popupNode){var a=this.nodes;for(e=a.length-1;e>=0;e--){var h=a[e];if(void 0!=h.getTitle()&&h.isOverlappingWith(o)){this.popupNode=h;break}}}if(void 0==this.popupNode){var l=this.links;for(e=0,s=l.length;s>e;e++){var d=l[e];if(void 0!=d.getTitle()&&d.isOverlappingWith(o)){this.popupNode=d;break}}}if(this.popupNode){if(this.popupNode!=r){var p=this;p.popup||(p.popup=new links.Network.Popup(p.frame)),p.popup.setPosition(t-3,i-3),p.popup.setText(p.popupNode.getTitle()),p.popup.show()}}else this.popup&&this.popup.hide()},links.Network.prototype._checkHidePopup=function(t,i){var e={left:t,top:i,right:t,bottom:i};this.popupNode&&this.popupNode.isOverlappingWith(e)||(this.popupNode=void 0,this.popup&&this.popup.hide())},links.Network.prototype._onTouchStart=function(t){if(links.Network.preventDefault(t),!this.touchDown){this.touchDown=!0;var i=this;this.ontouchmove||(this.ontouchmove=function(t){i._onTouchMove(t)},links.Network.addEventListener(document,"touchmove",this.ontouchmove)),this.ontouchend||(this.ontouchend=function(t){i._onTouchEnd(t)},links.Network.addEventListener(document,"touchend",this.ontouchend)),this._onMouseDown(t)}},links.Network.prototype._onTouchMove=function(t){links.Network.preventDefault(t),this._onMouseMove(t)},links.Network.prototype._onTouchEnd=function(t){links.Network.preventDefault(t),this.touchDown=!1,this.ontouchmove&&(links.Network.removeEventListener(document,"touchmove",this.ontouchmove),this.ontouchmove=void 0),this.ontouchend&&(links.Network.removeEventListener(document,"touchend",this.ontouchend),this.ontouchend=void 0),this._onMouseUp(t)},links.Network.prototype._unselectNodes=function(t,i){var e,s,o,r=!1;if(t)for(e=0,s=t.length;s>e;e++){o=t[e].row,this.nodes[o].unselect();for(var n=0;n<this.selection.length;)this.selection[n].row==o?(this.selection.splice(n,1),r=!0):n++}else if(this.selection&&this.selection.length){for(e=0,s=this.selection.length;s>e;e++)o=this.selection[e].row,this.nodes[o].unselect(),r=!0;this.selection=[]}return!r||1!=i&&void 0!=i||this.trigger("select"),r},links.Network.prototype._selectNodes=function(t,i){var e,s,o=!1,r=!0;if(t.length!=this.selection.length)r=!1;else for(e=0,s=Math.min(t.length,this.selection.length);s>e;e++)if(t[e].row!=this.selection[e].row){r=!1;break}if(r)return o;if(void 0==i||0==i){var n=!1;o=this._unselectNodes(void 0,n)}for(e=0,s=t.length;s>e;e++){for(var a=t[e].row,h=!1,l=0,d=this.selection.length;d>l;l++)if(this.selection[l].row==a){h=!0;break}h||(this.nodes[a].select(),this.selection.push(t[e]),o=!0)}return o&&this.trigger("select"),o},links.Network.prototype._getNodesOverlappingWith=function(t){for(var i=[],e=0;e<this.nodes.length;e++)if(this.nodes[e].isOverlappingWith(t)){var s={row:e};i.push(s)}return i},links.Network.prototype.getSelection=function(){for(var t=[],i=0;i<this.selection.length;i++){var e=this.selection[i].row;t.push({row:e})}return t},links.Network.prototype.setSelection=function(t){var i,e,s;if(void 0==t.length)throw"Selection must be an array with objects";for(i=0,e=this.selection.length;e>i;i++)s=this.selection[i].row,this.nodes[s].unselect();for(this.selection=[],i=0,e=t.length;e>i;i++){if(s=t[i].row,void 0==s)throw"Parameter row missing in selection object";if(s>this.nodes.length-1)throw"Parameter row out of range";var o={row:s};this.selection.push(o),this.nodes[s].select()}this.redraw()},links.Network.prototype._getConnectionCount=function(t){function i(t){for(var i=[],s=0,o=t.length;o>s;s++)for(var r=t[s],n=0,a=e.length;a>n;n++){var h=null;e[n].from==r?h=e[n].to:e[n].to==r&&(h=e[n].from);var l,d;if(h)for(l=0,d=t.length;d>l;l++)if(t[l]==h){h=null;break}if(h)for(l=0,d=i.length;d>l;l++)if(i[l]==h){h=null;break}h&&i.push(h)}return i}var e=this.links;void 0==t&&(t=1);var s,o,r=[],n=this.nodes;for(s=0,o=n.length;o>s;s++){for(var a=[n[s]],h=0;t>h;h++)a=a.concat(i(a));r.push(a)}var l=[];for(s=0,len=r.length;s<len;s++)l.push(r[s].length);return l},links.Network.prototype._setSize=function(t,i){this.frame.style.width=t,this.frame.style.height=i,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.slider&&this.slider.redraw()},links.Network.tableToArray=function(t){var i,e=[],s=t.getNumberOfColumns(),o={};for(i=0;s>i;i++){var r=t.getColumnLabel(i);o[r]=i}for(var n=t.getNumberOfRows(),a=0;n>a;a++){var h={};for(i in o)o.hasOwnProperty(i)&&(h[i]=t.getValue(a,o[i]));e.push(h)}return e},links.Network.prototype.addNodes=function(t){var i;if(google&&google.visualization&&google.visualization.DataTable&&t instanceof google.visualization.DataTable)i=links.Network.tableToArray(t);else{if(!links.Network.isArray(t))return;i=t}for(var e=!1,s=i.length,o=0;s>o;o++){var r=i[o];if(void 0!=r.value&&(e=!0),void 0==r.id)throw"Column 'id' missing in table with nodes (row "+o+")";this._createNode(r)}e&&this._updateValueRange(this.nodes),this.start()},links.Network.prototype.setNodes=function(t){var i;if(google&&google.visualization&&google.visualization.DataTable&&t instanceof google.visualization.DataTable)i=links.Network.tableToArray(t);else{if(!links.Network.isArray(t))return;i=t}this.hasMovingNodes=!1,this.nodesTable=i,this.nodes=[],this.selection=[];for(var e=!1,s=i.length,o=0;s>o;o++){var r=i[o];if(void 0!=r.value&&(e=!0),r.timestamp&&(this.hasTimestamps=this.hasTimestamps||r.timestamp),void 0==r.id)throw"Column 'id' missing in table with nodes (row "+o+")";this._createNode(r)}e&&this._updateValueRange(this.nodes)},links.Network.prototype._filterNodes=function(t){if(void 0!=this.nodesTable){if(void 0!==t)for(var i=this.nodes,e=0;e<i.length;){var s=i[e].timestamp;void 0!==s&&s>t?i.splice(e,1):e++}for(var o=this.nodesTable,r=o.length,n=0;r>n;n++){var a=o[n];if(void 0===a.id)throw"Column 'id' missing in table with nodes (row "+n+")";var h=a.timestamp?a.timestamp:void 0,l=!0;void 0!==h&&void 0!==t&&h>t&&(l=!1),l&&this._createNode(a)}this.start()}},links.Network.prototype._createNode=function(t){var i,e,s,o,r=t.action?t.action:"update";if("create"===r)s=new links.Network.Node(t,this.images,this.groups,this.constants),i=t.id,e=void 0!==i?this._findNode(i):void 0,void 0!==e?(o=this.nodes[e],this.nodes[e]=s,o.selected&&this._unselectNodes([{row:e}],!1)):this.nodes.push(s),s.isFixed()||(this.hasMovingNodes=!0);else if("update"===r){if(i=t.id,void 0===i)throw"Cannot update a node without id";e=this._findNode(i),void 0!==e?this.nodes[e].setProperties(t,this.constants):(s=new links.Network.Node(t,this.images,this.groups,this.constants),this.nodes.push(s),s.isFixed()||(this.hasMovingNodes=!0))}else{if("delete"!==r)throw"Unknown action "+r+". Choose 'create', 'update', or 'delete'.";if(i=t.id,void 0===i)throw"Cannot delete node without its id";if(e=this._findNode(i),void 0===e)throw"Node with id "+i+" not found";o=this.nodes[e],o.selected&&this._unselectNodes([{row:e}],!1),this.nodes.splice(e,1)}},links.Network.prototype._findNode=function(t){for(var i=this.nodes,e=0,s=i.length;s>e;e++)if(i[e].id===t)return e;return void 0},links.Network.prototype._findNodeByRow=function(t){return this.nodes[t]},links.Network.prototype.setLinks=function(t){var i;if(google&&google.visualization&&google.visualization.DataTable&&t instanceof google.visualization.DataTable)i=links.Network.tableToArray(t);else{if(!links.Network.isArray(t))return;i=t}this.linksTable=i,this.links=[],this.hasMovingLinks=!1;for(var e=!1,s=i.length,o=0;s>o;o++){var r=i[o];if(void 0===r.from)throw"Column 'from' missing in table with links (row "+o+")";if(void 0===r.to)throw"Column 'to' missing in table with links (row "+o+")";void 0!=r.timestamp&&(this.hasTimestamps=this.hasTimestamps||r.timestamp),void 0!=r.value&&(e=!0),this._createLink(r)}e&&this._updateValueRange(this.links)},links.Network.prototype.addLinks=function(t){var i;if(google&&google.visualization&&google.visualization.DataTable&&t instanceof google.visualization.DataTable)i=links.Network.tableToArray(t);else{if(!links.Network.isArray(t))return;i=t}for(var e=!1,s=i.length,o=0;s>o;o++){var r=i[o];if(void 0===r.from)throw"Column 'from' missing in table with links (row "+o+")";if(void 0===r.to)throw"Column 'to' missing in table with links (row "+o+")";void 0!=r.value&&(e=!0),this._createLink(r)}e&&this._updateValueRange(this.links),this.start()},links.Network.prototype._filterLinks=function(t){if(void 0!=this.linksTable){if(void 0!==t)for(var i=this.links,e=0;e<i.length;){var s=i[e].timestamp;void 0!==s&&s>t?i.splice(e,1):e++}for(var o=this.linksTable,r=o.length,n=0;r>n;n++){var a=o[n];if(void 0===a.from)throw"Column 'from' missing in table with links (row "+n+")";if(void 0===a.to)throw"Column 'to' missing in table with links (row "+n+")";var h=a.timestamp?a.timestamp:void 0,l=!0;void 0!==h&&void 0!==t&&h>t&&(l=!1),l&&this._createLink(a)}this.start()}},links.Network.prototype._createLink=function(t){var i,e,s,o,r=t.action?t.action:"create";if("create"===r)i=t.id,e=void 0!==i?this._findLink(i):void 0,s=new links.Network.Link(t,this,this.constants),void 0!==e?(o=this.links[e],o.from.detachLink(o),o.to.detachLink(o),this.links[e]=s):this.links.push(s),s.from.attachLink(s),s.to.attachLink(s),s.isMoving()&&(this.hasMovingLinks=!0);else if("update"===r){if(i=t.id,void 0===i)throw"Cannot update a link without id";e=this._findLink(i),void 0!==e?(s=this.links[e],s.from.detachLink(s),s.to.detachLink(s),s.setProperties(t,this.constants),s.from.attachLink(s),s.to.attachLink(s)):(s=new links.Network.Link(t,this,this.constants),s.from.attachLink(s),s.to.attachLink(s),this.links.push(s),s.isMoving()&&(this.hasMovingLinks=!0))}else{if("delete"!==r)throw"Unknown action "+r+". Choose 'create', 'update', or 'delete'.";if(i=t.id,void 0===i)throw"Cannot delete link without its id";if(e=this._findLink(i),void 0===e)throw"Link with id "+i+" not found";o=this.links[i],s.from.detachLink(o),s.to.detachLink(o),this.links.splice(e,1)}},links.Network.prototype._updateNodeReferences=function(t,i){for(var e=[this.links,this.packages],s=0,o=e.length;o>s;s++)for(var r=e[s],n=0,a=r.length;a>n;n++)r.from===t&&(r.from=i),r.to===t&&(r.to=i)},links.Network.prototype._findLink=function(t){for(var i=this.links,e=0,s=i.length;s>e;e++)if(i[e].id===t)return e;return void 0},links.Network.prototype._findLinkByRow=function(t){return this.links[t]},links.Network.prototype.addPackages=function(t){var i;if(google&&google.visualization&&google.visualization.DataTable&&t instanceof google.visualization.DataTable)i=links.Network.tableToArray(t);else{if(!links.Network.isArray(t))return;i=t}for(var e=i.length,s=0;e>s;s++){var o=i[s];if(void 0===o.from)throw"Column 'from' missing in table with packages (row "+s+")";if(void 0===o.to)throw"Column 'to' missing in table with packages (row "+s+")";this._createPackage(o)}this._updateValueRange(this.packages),this.start()},links.Network.prototype.setPackages=function(t){var i;if(google&&google.visualization&&google.visualization.DataTable&&t instanceof google.visualization.DataTable)i=links.Network.tableToArray(t);else{if(!links.Network.isArray(t))return;i=t}this.packagesTable=i,this.packages=[];for(var e=i.length,s=0;e>s;s++){var o=i[s];if(void 0===o.from)throw"Column 'from' missing in table with packages (row "+s+")";if(void 0===o.to)throw"Column 'to' missing in table with packages (row "+s+")";o.timestamp&&(this.hasTimestamps=this.hasTimestamps||o.timestamp),this._createPackage(o)}this._updateValueRange(this.packages)},links.Network.prototype._filterPackages=function(t){if(void 0!=this.packagesTable){this.packages=[];for(var i=this.packagesTable,e=i.length,s=0;e>s;s++){var o=i[s];if(void 0===o.from)throw"Column 'from' missing in table with packages (row "+s+")";if(void 0===o.to)throw"Column 'to' missing in table with packages (row "+s+")";var r=o.timestamp?o.timestamp:void 0,n=!0;if(void 0!==r&&void 0!==t&&r>t&&(n=!1),n===!0&&void 0==o.progress){var a=o.duration||this.constants.packages.duration,h=(t.getTime()-r.getTime())/1e3;if(a>h){var l=o;o={};for(var d in l)l.hasOwnProperty(d)&&(o[d]=l[d]);o.progress=h/a}else n=!1}n===!0&&this._createPackage(o)}this.start()}},links.Network.prototype._createPackage=function(t){var i,e,s,o=t.action?t.action:"create";if("create"===o)i=t.id,e=void 0!==i?this._findPackage(i):void 0,s=new links.Network.Package(t,this,this.images,this.constants),void 0!==e?this.packages[e]=s:this.packages.push(s),s.isMoving()&&(this.hasMovingPackages=!0);else if("update"===o){if(i=t.id,void 0===i)throw"Cannot update a link without id";e=this._findPackage(i),void 0!==e?this.packages[e].setProperties(t,this.constants):(s=new links.Network.Package(t,this,this.images,this.constants),this.packages.push(s),s.isMoving()&&(this.hasMovingPackages=!0))}else{if("delete"!==o)throw"Unknown action "+o+". Choose 'create', 'update', or 'delete'.";if(i=t.id,void 0===i)throw"Cannot delete package without its id";if(e=this._findPackage(i),void 0===e)throw"Package with id "+i+" not found";this.packages.splice(e,1)}},links.Network.prototype._findPackage=function(t){for(var i=this.packages,e=0,s=i.length;s>e;e++)if(i[e].id===t)return e;return void 0},links.Network.prototype._findPackageByRow=function(t){return this.packages[t]},links.Network.prototype._getColumnNames=function(t){for(var i=t.getNumberOfColumns(),e={},s=0;i>s;s++){var o=t.getColumnLabel(s);e[o]=s}return e},links.Network.prototype._updateValueRange=function(t){var i,e=t.length,s=void 0,o=void 0;for(i=0;e>i;i++){var r=t[i].getValue();void 0!==r&&(s=void 0===s?r:Math.min(r,s),o=void 0===o?r:Math.max(r,o))}if(void 0!==s&&void 0!==o)for(i=0;e>i;i++)t[i].setValueRange(s,o)},links.Network.prototype.setTimestamp=function(t){this._filterNodes(t),this._filterLinks(t),this._filterPackages(t)},links.Network.prototype._getRange=function(){for(var t={start:void 0,end:void 0},i=[this.nodesTable,this.linksTable],e=0,s=i.length;s>e;e++){var o=i[e];if(void 0!==o)for(var r=0,n=o.length;n>r;r++){var a=o[r].timestamp;a&&(a instanceof Date&&(a=a.getTime()),t.start=t.start?Math.min(a,t.start):a,t.end=t.end?Math.max(a,t.end):a)}}if(this.packagesTable)for(var h=this.packagesTable,l=0,d=h.length;d>l;l++){var p=h[l],a=p.timestamp,f=p.progress,c=p.duration||this.constants.packages.duration;if(a instanceof Date&&(a=a.getTime()),void 0!=a){var u=a,k=f?a:a+1e3*c;t.start=t.start?Math.min(u,t.start):u,t.end=t.end?Math.max(k,t.end):k}}var g={start:new Date(t.start),end:new Date(t.end)};return g},links.Network.prototype.animationStart=function(){this.slider&&this.slider.play()},links.Network.prototype.animationStop=function(){this.slider&&this.slider.stop()},links.Network.prototype.setAnimationFramerate=function(t){this.slider&&this.slider.setFramerate(t)},links.Network.prototype.setAnimationDuration=function(t){this.slider&&this.slider.setDuration(t)},links.Network.prototype.setAnimationAcceleration=function(t){this.slider&&this.slider.setAcceleration(t)},links.Network.prototype.redraw=function(){this._setSize(this.width,this.height),this._redraw()},links.Network.prototype._redraw=function(){var t=this.frame.canvas.getContext("2d"),i=this.frame.canvas.width,e=this.frame.canvas.height;t.clearRect(0,0,i,e),t.save(),t.translate(this.translation.x,this.translation.y),t.scale(this.scale,this.scale),this._drawLinks(t),this._drawNodes(t),this._drawPackages(t),this._drawSlider(),t.restore()},links.Network.prototype._setTranslation=function(t,i){void 0===this.translation&&(this.translation={x:0,y:0}),void 0!==t&&(this.translation.x=t),void 0!==i&&(this.translation.y=i)},links.Network.prototype._getTranslation=function(){return{x:this.translation.x,y:this.translation.y}},links.Network.prototype._setScale=function(t){this.scale=t},links.Network.prototype._getScale=function(){return this.scale},links.Network.prototype._xToCanvas=function(t){return(t-this.translation.x)/this.scale},links.Network.prototype._canvasToX=function(t){return t*this.scale+this.translation.x},links.Network.prototype._yToCanvas=function(t){return(t-this.translation.y)/this.scale},links.Network.prototype._canvasToY=function(t){return t*this.scale+this.translation.y},links.Network.prototype._getNode=function(t){for(var i=0;i<this.nodes.length;i++)if(this.nodes[i].id==t)return this.nodes[i];return null},links.Network.prototype._drawNodes=function(t){for(var i=this.nodes,e=[],s=0,o=i.length;o>s;s++)i[s].isSelected()?e.push(s):i[s].draw(t);for(var r=0,n=e.length;n>r;r++)i[e[r]].draw(t)},links.Network.prototype._drawLinks=function(t){for(var i=this.links,e=0,s=i.length;s>e;e++)i[e].draw(t)},links.Network.prototype._drawPackages=function(t){for(var i=this.packages,e=0,s=i.length;s>e;e++)i[e].draw(t)},links.Network.prototype._drawSlider=function(){var t;if(this.hasTimestamps){if(t=this.frame.slider,void 0===t){t=document.createElement("div"),t.style.position="absolute",t.style.bottom="0px",t.style.left="0px",t.style.right="0px",t.style.backgroundColor="rgba(255, 255, 255, 0.7)",this.frame.slider=t,this.frame.slider.style.padding="10px",this.frame.appendChild(t);var i=this._getRange();this.slider=new links.Network.Slider(t),this.slider.setLoop(!1),this.slider.setRange(i.start,i.end);var e=this,s=function(){var t=e.slider.getValue();e.setTimestamp(t),e.redraw()};this.slider.setOnChangeCallback(s),s()}}else t=this.frame.slider,void 0!==t&&(this.frame.removeChild(t),this.frame.slider=void 0,this.slider=void 0)},links.Network.prototype._reposition=function(){for(var t=2*this.constants.links.length,i=this.frame.canvas.clientWidth/2,e=this.frame.canvas.clientHeight/2,s=0;s<this.nodes.length;s++){var o=2*Math.PI*(s/this.nodes.length);this.nodes[s].xFixed||(this.nodes[s].x=i+t*Math.cos(o)),this.nodes[s].yFixed||(this.nodes[s].y=e+t*Math.sin(o))}},links.Network.prototype._doStabilize=function(){for(var t=(new Date,0),i=this.constants.minVelocity,e=!1;!e&&t<this.constants.maxIterations;)this._calculateForces(),this._discreteStepNodes(),e=!this.isMoving(i),t++;new Date},links.Network.prototype._calculateForces=function(){for(var t=this.nodes,i=this.links,e=.01,s=this.frame.canvas.clientWidth/2,o=this.frame.canvas.clientHeight/2,r=0;r<t.length;r++){var n=s-t[r].x,a=o-t[r].y,h=Math.atan2(a,n),l=Math.cos(h)*e,d=Math.sin(h)*e;this.nodes[r]._setForce(l,d)}for(var p=this.constants.nodes.distance,f=10,r=0;r<t.length;r++)for(var c=r+1;c<this.nodes.length;c++){var n=t[c].x-t[r].x,a=t[c].y-t[r].y,u=Math.sqrt(n*n+a*a),h=Math.atan2(a,n),k=1/(1+Math.exp((u/p-1)*f)),l=Math.cos(h)*k,d=Math.sin(h)*k;this.nodes[r]._addForce(-l,-d),this.nodes[c]._addForce(l,d)}for(var g=0,v=i.length;v>g;g++){var w=i[g],n=w.to.x-w.from.x,a=w.to.y-w.from.y,m=w.length,y=Math.sqrt(n*n+a*a),h=Math.atan2(a,n),N=w.stiffness*(m-y),l=Math.cos(h)*N,d=Math.sin(h)*N;w.from._addForce(-l,-d),w.to._addForce(l,d)}},links.Network.prototype.isMoving=function(t){for(var i=this.nodes,e=0,s=i.length;s>e;e++)if(i[e].isMoving(t))return!0;return!1},links.Network.prototype._discreteStepNodes=function(){for(var t=this.refreshRate/1e3,i=this.nodes,e=0,s=i.length;s>e;e++)i[e].discreteStep(t)},links.Network.prototype._discreteStepPackages=function(){for(var t=this.refreshRate/1e3,i=this.packages,e=0,s=i.length;s>e;e++)i[e].discreteStep(t)},links.Network.prototype._deleteFinishedPackages=function(){for(var t=0,i=!1;t<this.packages.length;)this.packages[t].isFinished()?(this.packages.splice(t,1),t--):this.packages[t].isMoving()&&(i=!0),t++;this.hasMovingPackages=i},links.Network.prototype.start=function(){if(this.hasMovingNodes){this._calculateForces(),this._discreteStepNodes();var t=this.constants.minVelocity;this.hasMovingNodes=this.isMoving(t)}if(this.hasMovingPackages&&(this._discreteStepPackages(),this._deleteFinishedPackages()),this.hasMovingNodes||this.hasMovingLinks||this.hasMovingPackages){if(!this.timer){var i=this;this.timer=window.setTimeout(function(){i.timer=void 0,i.start(),i._redraw()},this.refreshRate)}}else this._redraw()},links.Network.prototype.stop=function(){this.timer&&(window.clearInterval(this.timer),this.timer=void 0)},links.Network.addEventListener=function(t,i,e,s){t.addEventListener?(void 0===s&&(s=!1),"mousewheel"===i&&navigator.userAgent.indexOf("Firefox")>=0&&(i="DOMMouseScroll"),t.addEventListener(i,e,s)):t.attachEvent("on"+i,e)},links.Network.removeEventListener=function(t,i,e,s){t.removeEventListener?(void 0===s&&(s=!1),"mousewheel"===i&&navigator.userAgent.indexOf("Firefox")>=0&&(i="DOMMouseScroll"),t.removeEventListener(i,e,s)):t.detachEvent("on"+i,e)},links.Network.stopPropagation=function(t){t||(t=window.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},links.Network.preventDefault=function(t){t||(t=window.event),t.preventDefault?t.preventDefault():t.returnValue=!1},links.Network._getAbsoluteLeft=function(t){for(var i=0;null!=t;)i+=t.offsetLeft,i-=t.scrollLeft,t=t.offsetParent;return!document.body.scrollLeft&&window.pageXOffset&&(i-=window.pageXOffset),i},links.Network._getAbsoluteTop=function(t){for(var i=0;null!=t;)i+=t.offsetTop,i-=t.scrollTop,t=t.offsetParent;return!document.body.scrollTop&&window.pageYOffset&&(i-=window.pageYOffset),i},links.Network.Node=function(t,i,e,s){this.selected=!1,this.links=[],this.group=s.nodes.group,this.fontSize=s.nodes.fontSize,this.fontFace=s.nodes.fontFace,this.fontColor=s.nodes.fontColor,this.borderColor=s.nodes.borderColor,this.backgroundColor=s.nodes.backgroundColor,this.highlightColor=s.nodes.highlightColor,this.id=void 0,this.style=s.nodes.style,this.image=s.nodes.image,this.x=0,this.y=0,this.xFixed=!1,this.yFixed=!1,this.radius=s.nodes.radius,this.radiusFixed=!1,this.radiusMin=s.nodes.radiusMin,this.radiusMax=s.nodes.radiusMax,this.imagelist=i,this.grouplist=e,this.setProperties(t,s),this.mass=50,this.fx=0,this.fy=0,this.vx=0,this.vy=0,this.minForce=s.minForce,this.damping=.9},links.Network.Node.prototype.attachLink=function(t){this.links.push(t),this._updateMass()},links.Network.Node.prototype.detachLink=function(t){var i=this.links.indexOf(t);-1!=i&&this.links.splice(i,1),this._updateMass()},links.Network.Node.prototype._updateMass=function(){this.mass=50+20*this.links.length},links.Network.Node.prototype.setProperties=function(t,i){if(t){if(void 0!=t.id&&(this.id=t.id),void 0!=t.text&&(this.text=t.text),void 0!=t.title&&(this.title=t.title),void 0!=t.group&&(this.group=t.group),void 0!=t.x&&(this.x=t.x),void 0!=t.y&&(this.y=t.y),void 0!=t.value&&(this.value=t.value),void 0!=t.timestamp&&(this.timestamp=t.timestamp),void 0===this.id)throw"Node must have an id";
if(this.group){var e=this.grouplist.get(this.group);for(var s in e)e.hasOwnProperty(s)&&(this[s]=e[s])}if(void 0!=t.style&&(this.style=t.style),void 0!=t.image&&(this.image=t.image),void 0!=t.radius&&(this.radius=t.radius),void 0!=t.borderColor&&(this.borderColor=t.borderColor),void 0!=t.backgroundColor&&(this.backgroundColor=t.backgroundColor),void 0!=t.highlightColor&&(this.highlightColor=t.highlightColor),void 0!=t.fontColor&&(this.fontColor=t.fontColor),void 0!=t.fontSize&&(this.fontSize=t.fontSize),void 0!=t.fontFace&&(this.fontFace=t.fontFace),void 0!=this.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.image)}this.xFixed=this.xFixed||void 0!=t.x,this.yFixed=this.yFixed||void 0!=t.y,this.radiusFixed=this.radiusFixed||void 0!=t.radius,"image"==this.style&&(this.radiusMin=i.nodes.widthMin,this.radiusMax=i.nodes.widthMax);var o=this.style;switch(o){case"database":this.draw=this._drawDatabase,this.resize=this._resizeDatabase;break;case"rect":this.draw=this._drawRect,this.resize=this._resizeRect;break;case"circle":this.draw=this._drawCircle,this.resize=this._resizeCircle;break;case"image":this.draw=this._drawImage,this.resize=this._resizeImage;break;case"text":this.draw=this._drawText,this.resize=this._resizeText;break;case"dot":this.draw=this._drawDot,this.resize=this._resizeShape;break;case"square":this.draw=this._drawSquare,this.resize=this._resizeShape;break;case"triangle":this.draw=this._drawTriangle,this.resize=this._resizeShape;break;case"triangleDown":this.draw=this._drawTriangleDown,this.resize=this._resizeShape;break;case"star":this.draw=this._drawStar,this.resize=this._resizeShape;break;default:this.draw=this._drawRect,this.resize=this._resizeRect}this._reset()}},links.Network.Node.prototype.select=function(){this.selected=!0,this._reset()},links.Network.Node.prototype.unselect=function(){this.selected=!1,this._reset()},links.Network.Node.prototype._reset=function(){this.width=void 0,this.height=void 0},links.Network.Node.prototype.getTitle=function(){return this.title},links.Network.Node.prototype.distanceToBorder=function(t,i){var e=1;switch(this.width||this.resize(t),this.style){case"circle":case"dot":return this.radius+e;case"rect":case"image":case"text":default:return this.width?Math.min(Math.abs(this.width/2/Math.cos(i)),Math.abs(this.height/2/Math.sin(i)))+e:0}},links.Network.Node.prototype._setForce=function(t,i){this.fx=t,this.fy=i},links.Network.Node.prototype._addForce=function(t,i){this.fx+=t,this.fy+=i},links.Network.Node.prototype.discreteStep=function(t){if(!this.xFixed){var i=-this.damping*this.vx,e=(this.fx+i)/this.mass;this.vx+=e/t,this.x+=this.vx/t}if(!this.yFixed){var s=-this.damping*this.vy,o=(this.fy+s)/this.mass;this.vy+=o/t,this.y+=this.vy/t}},links.Network.Node.prototype.isFixed=function(){return this.xFixed&&this.yFixed},links.Network.Node.prototype.isMoving=function(t){return Math.abs(this.vx)>t||Math.abs(this.vy)>t||!this.xFixed&&Math.abs(this.fx)>this.minForce||!this.yFixed&&Math.abs(this.fy)>this.minForce},links.Network.Node.prototype.isSelected=function(){return this.selected},links.Network.Node.prototype.getValue=function(){return this.value},links.Network.Node.prototype.getDistance=function(t,i){var e=this.x-t,s=this.y-i;return Math.sqrt(e*e+s*s)},links.Network.Node.prototype.setValueRange=function(t,i){if(!this.radiusFixed&&void 0!==this.value){var e=(this.radiusMax-this.radiusMin)/(i-t);this.radius=(this.value-t)*e+this.radiusMin}},links.Network.Node.prototype.draw=function(){throw"Draw method not initialized for node"},links.Network.Node.prototype.resize=function(){throw"Resize method not initialized for node"},links.Network.Node.prototype.isOverlappingWith=function(t){return this.left<t.right&&this.left+this.width>t.left&&this.top<t.bottom&&this.top+this.height>t.top},links.Network.Node.prototype._resizeImage=function(){if(!this.width){var t,i;if(this.value){var e=this.imageObj.height/this.imageObj.width;t=this.radius||this.imageObj.width,i=this.radius*e||this.imageObj.height}else t=this.imageObj.width,i=this.imageObj.height;this.width=t,this.height=i}},links.Network.Node.prototype._drawImage=function(t){this._resizeImage(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var i;this.imageObj?(t.drawImage(this.imageObj,this.left,this.top,this.width,this.height),i=this.y+this.height/2):i=this.y,this._text(t,this.text,this.x,i,void 0,"top")},links.Network.Node.prototype._resizeRect=function(t){if(!this.width){var i=5,e=this.getTextSize(t);this.width=e.width+2*i,this.height=e.height+2*i}},links.Network.Node.prototype._drawRect=function(t){this._resizeRect(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2,t.strokeStyle=this.borderColor,t.fillStyle=this.selected?this.highlightColor:this.backgroundColor,t.lineWidth=this.selected?2:1,t.roundRect(this.left,this.top,this.width,this.height,this.radius),t.fill(),t.stroke(),this._text(t,this.text,this.x,this.y)},links.Network.Node.prototype._resizeDatabase=function(t){if(!this.width){var i=5,e=this.getTextSize(t),s=e.width+2*i;this.width=s,this.height=s}},links.Network.Node.prototype._drawDatabase=function(t){this._resizeDatabase(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2,t.strokeStyle=this.borderColor,t.fillStyle=this.selected?this.highlightColor:this.backgroundColor,t.lineWidth=this.selected?2:1,t.database(this.x-this.width/2,this.y-.5*this.height,this.width,this.height),t.fill(),t.stroke(),this._text(t,this.text,this.x,this.y)},links.Network.Node.prototype._resizeCircle=function(t){if(!this.width){var i=5,e=this.getTextSize(t),s=Math.max(e.width,e.height)+2*i;this.radius=s/2,this.width=s,this.height=s}},links.Network.Node.prototype._drawCircle=function(t){this._resizeCircle(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2,t.strokeStyle=this.borderColor,t.fillStyle=this.selected?this.highlightColor:this.backgroundColor,t.lineWidth=this.selected?2:1,t.circle(this.x,this.y,this.radius),t.fill(),t.stroke(),this._text(t,this.text,this.x,this.y)},links.Network.Node.prototype._drawDot=function(t){this._drawShape(t,"circle")},links.Network.Node.prototype._drawTriangle=function(t){this._drawShape(t,"triangle")},links.Network.Node.prototype._drawTriangleDown=function(t){this._drawShape(t,"triangleDown")},links.Network.Node.prototype._drawSquare=function(t){this._drawShape(t,"square")},links.Network.Node.prototype._drawStar=function(t){this._drawShape(t,"star")},links.Network.Node.prototype._resizeShape=function(){if(!this.width){var t=2*this.radius;this.width=t,this.height=t}},links.Network.Node.prototype._drawShape=function(t,i){this._resizeShape(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2,t.strokeStyle=this.borderColor,t.fillStyle=this.selected?this.highlightColor:this.backgroundColor,t.lineWidth=this.selected?2:1,t[i](this.x,this.y,this.radius),t.fill(),t.stroke(),this.text&&this._text(t,this.text,this.x,this.y+this.height/2,void 0,"top")},links.Network.Node.prototype._resizeText=function(t){if(!this.width){var i=5,e=this.getTextSize(t);this.width=e.width+2*i,this.height=e.height+2*i}},links.Network.Node.prototype._drawText=function(t){this._resizeText(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2,this._text(t,this.text,this.x,this.y)},links.Network.Node.prototype._text=function(t,i,e,s,o,r){if(i){t.font=(this.selected?"bold ":"")+this.fontSize+"px "+this.fontFace,t.fillStyle=this.fontColor||"black",t.textAlign=o||"center",t.textBaseline=r||"middle";for(var n=i.split("\n"),a=n.length,h=this.fontSize+4,l=s+(1-a)/2*h,d=0;a>d;d++)t.fillText(n[d],e,l),l+=h}},links.Network.Node.prototype.getTextSize=function(t){if(void 0!=this.text){t.font=(this.selected?"bold ":"")+this.fontSize+"px "+this.fontFace;for(var i=this.text.split("\n"),e=(this.fontSize+4)*i.length,s=0,o=0,r=i.length;r>o;o++)s=Math.max(s,t.measureText(i[o]).width);return{width:s,height:e}}return{width:0,height:0}},links.Network.Link=function(t,i,e){if(!i)throw"No network provided";this.network=i,this.widthMin=e.links.widthMin,this.widthMax=e.links.widthMax,this.id=void 0,this.style=e.links.style,this.title=void 0,this.width=e.links.width,this.value=void 0,this.length=e.links.length,this.dashlength=e.links.dashlength,this.dashgap=e.links.dashgap,this.altdashlength=e.links.altdashlength,this.stiffness=void 0,this.color=e.links.color,this.timestamp=void 0,this.widthFixed=!1,this.lengthFixed=!1,this.setProperties(t,e)},links.Network.Link.prototype.setProperties=function(t,i){if(t){if(void 0!=t.from&&(this.from=this.network._getNode(t.from)),void 0!=t.to&&(this.to=this.network._getNode(t.to)),void 0!=t.id&&(this.id=t.id),void 0!=t.style&&(this.style=t.style),void 0!=t.text&&(this.text=t.text),void 0!=t.textTo&&(this.textTo=t.textTo),void 0!=t.textFrom&&(this.textFrom=t.textFrom),(this.text||this.textTo||this.textFrom)&&(this.fontSize=i.links.fontSize,this.fontFace=i.links.fontFace,this.fontColor=i.links.fontColor,void 0!=t.fontColor&&(this.fontColor=t.fontColor),void 0!=t.fontSize&&(this.fontSize=t.fontSize),void 0!=t.fontFace&&(this.fontFace=t.fontFace)),void 0!=t.title&&(this.title=t.title),void 0!=t.width&&(this.width=t.width),void 0!=t.value&&(this.value=t.value),void 0!=t.length&&(this.length=t.length),void 0!=t.dashlength&&(this.dashlength=t.dashlength),void 0!=t.dashgap&&(this.dashgap=t.dashgap),void 0!=t.altdashlength&&(this.altdashlength=t.altdashlength),void 0!=t.color&&(this.color=t.color),void 0!=t.timestamp&&(this.timestamp=t.timestamp),!this.from)throw"Node with id "+t.from+" not found";if(!this.to)throw"Node with id "+t.to+" not found";if(this.widthFixed=this.widthFixed||void 0!=t.width,this.lengthFixed=this.lengthFixed||void 0!=t.length,this.stiffness=1/this.length,"arrow"===this.style)this.arrows=[.5],this.animation=!1;else if("arrow-end"===this.style)this.animation=!1;else if("moving-arrows"===this.style){this.arrows=[];for(var e=3,s=0;e>s;s++)this.arrows.push(s/e);this.animation=!0}else"moving-dot"===this.style?(this.dot=0,this.animation=!0):this.animation=!1;switch(this.style){case"line":this.draw=this._drawLine;break;case"arrow":this.draw=this._drawArrow;break;case"arrow-end":this.draw=this._drawArrowEnd;break;case"moving-arrows":this.draw=this._drawMovingArrows;break;case"moving-dot":this.draw=this._drawMovingDot;break;case"dash-line":this.draw=this._drawDashLine;break;default:this.draw=this._drawLine}}},links.Network.Link.prototype.isMoving=function(){return this.animation},links.Network.Link.prototype.getTitle=function(){return this.title},links.Network.Link.prototype.getValue=function(){return this.value},links.Network.Link.prototype.setValueRange=function(t,i){if(!this.widthFixed&&void 0!==this.value){var e=(this.widthMax-this.widthMin)/(i-t);this.width=(this.value-t)*e+this.widthMin}},links.Network.Link.prototype.isLengthFixed=function(){return this.lengthFixed},links.Network.Link.prototype.getLength=function(){return this.length},links.Network.Link.prototype.setLength=function(t){this.lengthFixed||(this.length=t)},links.Network.Link.prototype.getDashLength=function(){return this.dashlength},links.Network.Link.prototype.setDashLength=function(t){this.dashlength=t},links.Network.Link.prototype.getDashGap=function(){return this.dashgap},links.Network.Link.prototype.setDashGap=function(t){this.dashgap=t},links.Network.Link.prototype.getAltDashLength=function(){return this.altdashlength},links.Network.Link.prototype.setAltDashLength=function(t){this.altdashlength=t},links.Network.Link.prototype.draw=function(){throw"Method draw not initialized in link"},links.Network.Link.prototype.isOverlappingWith=function(t){var i=10,e=this.from.x,s=this.from.y,o=this.to.x,r=this.to.y,n=t.left,a=t.top,h=links.Network._dist(e,s,o,r,n,a);return i>h},links.Network._dist=function(t,i,e,s,o,r){var n=e-t,a=s-i,h=n*n+a*a,l=((o-t)*n+(r-i)*a)/h;l>1?l=1:0>l&&(l=0);var d=t+l*n,p=i+l*a,f=d-o,c=p-r;return Math.sqrt(f*f+c*c)},links.Network.Link.prototype._drawLine=function(t){t.strokeStyle=this.color,t.lineWidth=this._getLineWidth();var i;if(this.from!=this.to)this._line(t),this._drawText(t);else{var e,s,o=this.length/2/Math.PI,r=this.from;r.width||r.resize(t),r.width>r.height?(e=r.x+r.width/2,s=r.y-o):(e=r.x+o,s=r.y-r.height/2),this._circle(t,e,s,o),i=this._pointOnCircle(e,s,o,.5),this._text(t,this.text,i.x,i.y)}},links.Network.Link.prototype._getLineWidth=function(){return this.from.selected||this.to.selected?Math.min(2*this.width,this.widthMax):this.width},links.Network.Link.prototype._line=function(t){t.beginPath(),t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y),t.stroke()},links.Network.Link.prototype._circle=function(t,i,e,s){t.beginPath(),t.arc(i,e,s,0,2*Math.PI,!1),t.stroke()},links.Network.Link.prototype._drawText=function(t){if(this.text&&(i=this._pointOnLine(.5),this._text(t,this.text,i.x,i.y)),this.textFrom){var i=this._pointOnLine(.7);this._text(t,this.textFrom,i.x,i.y)}if(this.textTo){var i=this._pointOnLine(.3);this._text(t,this.textTo,i.x,i.y)}},links.Network.Link.prototype._text=function(t,i,e,s){if(i){t.font=(this.from.selected||this.to.selected?"bold ":"")+this.fontSize+"px "+this.fontFace,t.fillStyle="white";var o=t.measureText(i).width,r=this.fontSize,n=e-o/2,a=s-r/2;t.fillRect(n,a,o,r),t.fillStyle=this.fontColor||"black",t.textAlign="left",t.textBaseline="top",t.fillText(i,n,a)}};var CP=window.CanvasRenderingContext2D&&CanvasRenderingContext2D.prototype;CP&&CP.lineTo&&(CP.dashedLine=function(t,i,e,s,o){o||(o=[10,5]),0==f&&(f=.001);var r=o.length;this.moveTo(t,i);for(var n=e-t,a=s-i,h=a/n,l=Math.sqrt(n*n+a*a),d=0,p=!0;l>=.1;){var f=o[d++%r];f>l&&(f=l);var c=Math.sqrt(f*f/(1+h*h));0>n&&(c=-c),t+=c,i+=h*c,this[p?"lineTo":"moveTo"](t,i),l-=f,p=!p}}),links.Network.Link.prototype._drawDashLine=function(t){t.strokeStyle=this.color,t.lineWidth=this._getLineWidth(),t.beginPath(),t.lineCap="round",void 0!=this.altdashlength?t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.dashlength,this.dashgap,this.altdashlength,this.dashgap]):void 0!=this.dashlength&&void 0!=this.dashgap?t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.dashlength,this.dashgap]):(t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y)),t.stroke(),this._drawText(t)},links.Network.Link.prototype._pointOnLine=function(t){return{x:(1-t)*this.from.x+t*this.to.x,y:(1-t)*this.from.y+t*this.to.y}},links.Network.Link.prototype._pointOnCircle=function(t,i,e,s){var o=2*(s-3/8)*Math.PI;return{x:t+e*Math.cos(o),y:i-e*Math.sin(o)}},links.Network.Link.prototype._drawMovingArrows=function(t){this._drawArrow(t);for(var i in this.arrows)this.arrows.hasOwnProperty(i)&&(this.arrows[i]+=.02,this.arrows[i]>1&&(this.arrows[i]=0))},links.Network.Link.prototype._drawMovingDot=function(t){t.strokeStyle=this.color,t.fillStyle=this.color,t.lineWidth=this._getLineWidth();var i;if(this.from!=this.to){this._line(t);var e=4+2*this.width;i=this._pointOnLine(this.dot),t.circle(i.x,i.y,e),t.fill(),this.dot+=.05,this.dot>1&&(this.dot=0),this._drawText(t)}},links.Network.Link.prototype._drawArrow=function(t){var i;if(t.strokeStyle=this.color,t.fillStyle=this.color,t.lineWidth=this._getLineWidth(),this.from!=this.to){this._line(t);var e=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),s=10+5*this.width;for(var o in this.arrows)this.arrows.hasOwnProperty(o)&&(i=this._pointOnLine(this.arrows[o]),t.arrow(i.x,i.y,e,s),t.fill(),t.stroke());this._drawText(t)}else{var r,n,a=this.length/2/Math.PI,h=this.from;h.width||h.resize(t),h.width>h.height?(r=h.x+h.width/2,n=h.y-a):(r=h.x+a,n=h.y-h.height/2),this._circle(t,r,n,a);var e=.2*Math.PI,s=10+5*this.width;for(var o in this.arrows)this.arrows.hasOwnProperty(o)&&(i=this._pointOnCircle(r,n,a,this.arrows[o]),t.arrow(i.x,i.y,e,s),t.fill(),t.stroke());this._drawText(t)}},links.Network.Link.prototype._drawArrowEnd=function(t){t.strokeStyle=this.color,t.fillStyle=this.color,t.lineWidth=this._getLineWidth();var i,e;if(this.from!=this.to){i=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var s=this.to.x-this.from.x,o=this.to.y-this.from.y,r=Math.sqrt(s*s+o*o),n=this.to.distanceToBorder(t,i+Math.PI),a=(r-n)/r,h=a*this.from.x+(1-a)*this.to.x,l=a*this.from.y+(1-a)*this.to.y,d=this.to.distanceToBorder(t,i),p=(r-d)/r,f=(1-p)*this.from.x+p*this.to.x,c=(1-p)*this.from.y+p*this.to.y;t.beginPath(),t.moveTo(h,l),t.lineTo(f,c),t.stroke(),e=10+5*this.width,t.arrow(f,c,i,e),t.fill(),t.stroke(),this._drawText(t)}else{var u,k,g,v=this.length/2/Math.PI,w=this.from;w.width||w.resize(t),w.width>w.height?(u=w.x+w.width/2,k=w.y-v,g={x:u,y:w.y,angle:.9*Math.PI}):(u=w.x+v,k=w.y-w.height/2,g={x:w.x,y:k,angle:.6*Math.PI}),t.beginPath(),t.arc(u,k,v,0,2*Math.PI,!1),t.stroke(),e=10+5*this.width,t.arrow(g.x,g.y,g.angle,e),t.fill(),t.stroke(),this._drawText(t)}},links.Network.Images=function(){this.images={},this.callback=void 0},links.Network.Images.prototype.setOnloadCallback=function(t){this.callback=t},links.Network.Images.prototype.load=function(t){var i=this.images[t];if(void 0==i){var e=this;i=new Image,this.images[t]=i,i.onload=function(){e.callback&&e.callback(this)},i.src=t}return i},links.Network.Package=function(t,i,e,s){if(void 0==i)throw"No network provided";this.radiusMin=s.packages.radiusMin,this.radiusMax=s.packages.radiusMax,this.imagelist=e,this.network=i,this.id=void 0,this.from=void 0,this.to=void 0,this.title=void 0,this.style=s.packages.style,this.radius=s.packages.radius,this.color=s.packages.color,this.image=s.packages.image,this.value=void 0,this.progress=0,this.timestamp=void 0,this.duration=s.packages.duration,this.autoProgress=!0,this.radiusFixed=!1,this.setProperties(t,s)},links.Network.Package.DEFAULT_DURATION=1,links.Network.Package.prototype.setProperties=function(t,i){if(t){if(void 0!=t.from&&(this.from=this.network._getNode(t.from)),void 0!=t.to&&(this.to=this.network._getNode(t.to)),!this.from)throw"Node with id "+t.from+" not found";if(!this.to)throw"Node with id "+t.to+" not found";if(void 0!=t.id&&(this.id=t.id),void 0!=t.title&&(this.title=t.title),void 0!=t.style&&(this.style=t.style),void 0!=t.radius&&(this.radius=t.radius),void 0!=t.value&&(this.value=t.value),void 0!=t.image&&(this.image=t.image),void 0!=t.color&&(this.color=t.color),void 0!=t.dashlength&&(this.dashlength=t.dashlength),void 0!=t.dashgap&&(this.dashgap=t.dashgap),void 0!=t.altdashlength&&(this.altdashlength=t.altdashlength),void 0!=t.progress&&(this.progress=t.progress),void 0!=t.timestamp&&(this.timestamp=t.timestamp),void 0!=t.duration&&(this.duration=t.duration),this.radiusFixed=this.radiusFixed||void 0!=t.radius,this.autoProgress=1==this.autoProgress?void 0==t.progress:!1,"image"==this.style&&(this.radiusMin=i.packages.widthMin,this.radiusMax=i.packages.widthMax),this.progress<0&&(this.progress=0),this.progress>1&&(this.progress=1),void 0!=this.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.image)}switch(this.style){case"dot":this.draw=this._drawDot;break;case"square":this.draw=this._drawSquare;break;case"triangle":this.draw=this._drawTriangle;break;case"triangleDown":this.draw=this._drawTriangleDown;break;case"star":this.draw=this._drawStar;break;case"image":this.draw=this._drawImage;break;default:this.draw=this._drawDot}}},links.Network.Package.prototype.setProgress=function(t){this.progress=t,this.autoProgress=!1},links.Network.Package.prototype.isFinished=function(){return 1==this.autoProgress&&this.progress>=1},links.Network.Package.prototype.isMoving=function(){return this.autoProgress||this.isFinished()},links.Network.Package.prototype.discreteStep=function(t){1==this.autoProgress&&(this.progress+=parseFloat(t)/this.duration,this.progress>1&&(this.progress=1))},links.Network.Package.prototype.draw=function(){throw"Draw method not initialized for package"},links.Network.Package.prototype.isOverlappingWith=function(t){var i=Math.max(this.radius,10),e=this._getPosition();return e.x-i<t.right&&e.x+i>t.left&&e.y-i<t.bottom&&e.y+i>t.top},links.Network.Package.prototype._getPosition=function(){return{x:(1-this.progress)*this.from.x+this.progress*this.to.x,y:(1-this.progress)*this.from.y+this.progress*this.to.y}},links.Network.Package.prototype.getTitle=function(){return this.title},links.Network.Package.prototype.getValue=function(){return this.value},links.Network.Package.prototype.getDistance=function(t,i){var e=this._getPosition(),s=e.x-t,o=e.y-i;return Math.sqrt(s*s+o*o)},links.Network.Package.prototype.setValueRange=function(t,i){if(!this.radiusFixed&&void 0!==this.value){var e=(this.radiusMax-this.radiusMin)/(i-t);this.radius=(this.value-t)*e+this.radiusMin}},links.Network.Package.prototype._drawDot=function(t){this._drawShape(t,"circle")},links.Network.Package.prototype._drawTriangle=function(t){this._drawShape(t,"triangle")},links.Network.Package.prototype._drawTriangleDown=function(t){this._drawShape(t,"triangleDown")},links.Network.Package.prototype._drawSquare=function(t){this._drawShape(t,"square")},links.Network.Package.prototype._drawStar=function(t){this._drawShape(t,"star")},links.Network.Package.prototype._drawShape=function(t,i){t.fillStyle=this.color;var e=this._getPosition();t[i](e.x,e.y,this.radius),t.fill()},links.Network.Package.prototype._drawImage=function(t){if(this.imageObj){var i,e;if(this.value){var s=this.imageObj.height/this.imageObj.width;i=this.radius||this.imageObj.width,e=this.radius*s||this.imageObj.height}else i=this.imageObj.width,e=this.imageObj.height;var o=this._getPosition();t.drawImage(this.imageObj,o.x-i/2,o.y-e/2,i,e)}else console.log("image still loading...")},links.Network.Groups=function(){this.clear(),this.defaultIndex=0},links.Network.Groups.DEFAULT=[{borderColor:"#2B7CE9",backgroundColor:"#97C2FC",highlightColor:"#D2E5FF"},{borderColor:"#FFA500",backgroundColor:"#FFFF00",highlightColor:"#FFFFA3"},{borderColor:"#FA0A10",backgroundColor:"#FB7E81",highlightColor:"#FFAFB1"},{borderColor:"#41A906",backgroundColor:"#7BE141",highlightColor:"#A1EC76"},{borderColor:"#E129F0",backgroundColor:"#EB7DF4",highlightColor:"#F0B3F5"},{borderColor:"#7C29F0",backgroundColor:"#AD85E4",highlightColor:"#D3BDF0"},{borderColor:"#C37F00",backgroundColor:"#FFA807",highlightColor:"#FFCA66"},{borderColor:"#4220FB",backgroundColor:"#6E6EFD",highlightColor:"#9B9BFD"},{borderColor:"#FD5A77",backgroundColor:"#FFC0CB",highlightColor:"#FFD1D9"},{borderColor:"#4AD63A",backgroundColor:"#C2FABC",highlightColor:"#E6FFE3"}],links.Network.Groups.prototype.clear=function(){this.groups={},this.groups.length=function(){var t=0;for(var i in this)this.hasOwnProperty(i)&&t++;return t}},links.Network.Groups.prototype.get=function(t){var i=this.groups[t];if(void 0==i){var e=this.defaultIndex%links.Network.Groups.DEFAULT.length;this.defaultIndex++,i={},i.borderColor=links.Network.Groups.DEFAULT[e].borderColor,i.backgroundColor=links.Network.Groups.DEFAULT[e].backgroundColor,i.highlightColor=links.Network.Groups.DEFAULT[e].highlightColor,this.groups[t]=i}return i},links.Network.Groups.prototype.add=function(t,i){return this.groups[t]=i,i},links.Network.isArray=function(t){return t instanceof Array?!0:"[object Array]"===Object.prototype.toString.call(t)},links.Network.Slider=function(t){if(void 0===t)throw"Error: No container element defined";this.container=t,this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.title=document.createElement("DIV"),this.title.style.margin="2px",this.title.style.marginBottom="5px",this.title.innerHTML="",this.container.appendChild(this.title),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(t){i._onMouseDown(t)},this.frame.prev.onclick=function(t){i.prev(t)},this.frame.play.onclick=function(t){i.togglePlay(t)},this.frame.next.onclick=function(t){i.next(t)},this.container.appendChild(this.frame),this.onChangeCallback=void 0,this.playTimeout=void 0,this.framerate=20,this.duration=10,this.doLoop=!0,this.start=0,this.end=0,this.value=0,this.step=0,this.rangeIsDate=!1,this.redraw()},links.Network.Slider.prototype._updateStep=function(){var t=this.end-this.start,i=this.duration*this.framerate;this.step=t/i},links.Network.Slider.prototype.prev=function(){this._setValue(this.value-this.step)},links.Network.Slider.prototype.next=function(){this._setValue(this.value+this.step)},links.Network.Slider.prototype.playNext=function(){var t=new Date;if(!this.leftButtonDown)if(this.value+this.step<this.end)this._setValue(this.value+this.step);else{if(!this.doLoop)return this._setValue(this.end),void this.stop();this._setValue(this.start)}var i=new Date,e=i-t,s=Math.max(1e3/this.framerate-e,0),o=this;this.playTimeout=setTimeout(function(){o.playNext()},s)},links.Network.Slider.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},links.Network.Slider.prototype.play=function(){this.frame.play.value="Stop",this.playNext()},links.Network.Slider.prototype.stop=function(){this.frame.play.value="Play",clearInterval(this.playTimeout),this.playTimeout=void 0},links.Network.Slider.prototype.setOnChangeCallback=function(t){this.onChangeCallback=t},links.Network.Slider.prototype.setFramerate=function(t){this.framerate=t,this._updateStep()},links.Network.Slider.prototype.getFramerate=function(){return this.framerate},links.Network.Slider.prototype.setDuration=function(t){this.duration=t,this._updateStep()},links.Network.Slider.prototype.setAcceleration=function(t){var i=(this.end-this.start)/1e3;this.duration=i/t,this._updateStep()},links.Network.Slider.prototype.setLoop=function(t){this.doLoop=t},links.Network.Slider.prototype.getLoop=function(){return this.doLoop},links.Network.Slider.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},links.Network.Slider.prototype.redraw=function(){var t=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2,i=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30;this.frame.bar.style.top=t+"px",this.frame.bar.style.width=i+"px",this.frame.slide.title=this.getValue(),this.frame.slide.style.left=this._valueToLeft(this.value)+"px",this.title.innerHTML=this.getValue()},links.Network.Slider.prototype.setRange=function(t,i){void 0===t||null===t||0/0===t?(this.start=0,this.rangeIsDate=!1):t instanceof Date?(this.start=t.getTime(),this.rangeIsDate=!0):(this.start=t,this.rangeIsDate=!1),this.end=void 0===i||null===i||0/0===i?this.start instanceof Date?new Date(this.start):this.start:i instanceof Date?i.getTime():i,this.value=this.start,this._updateStep(),this.redraw()},links.Network.Slider.prototype._setValue=function(t){this.value=this._limitValue(t),this.redraw(),this.onChange()},links.Network.Slider.prototype.getValue=function(){return this.rangeIsDate?new Date(this.value):this.value},links.Network.Slider.prototype.offset=3,links.Network.Slider.prototype._leftToValue=function(t){var i=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,e=t-this.offset,s=this.end-this.start,o=this._limitValue(e/i*s+this.start);return o},links.Network.Slider.prototype._valueToLeft=function(t){var i,e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;i=this.end>this.start?(t-this.start)/(this.end-this.start)*e:0;var s=i+this.offset;return s},links.Network.Slider.prototype._limitValue=function(t){return t<this.start&&(t=this.start),t>this.end&&(t=this.end),t},links.Network.Slider.prototype._onMouseDown=function(t){if(this.leftButtonDown=t.which?1===t.which:1===t.button,this.leftButtonDown){this.startClientX=t.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var i=this;this.onmousemove=function(t){i._onMouseMove(t)},this.onmouseup=function(t){i._onMouseUp(t)},links.Network.addEventListener(document,"mousemove",this.onmousemove),links.Network.addEventListener(document,"mouseup",this.onmouseup),links.Network.preventDefault(t)}},links.Network.Slider.prototype._onMouseMove=function(t){var i=t.clientX-this.startClientX,e=this.startSlideX+i,s=this._leftToValue(e);this._setValue(s),links.Network.preventDefault(t)},links.Network.Slider.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",this.leftButtonDown=!1,links.Network.removeEventListener(document,"mousemove",this.onmousemove),links.Network.removeEventListener(document,"mouseup",this.onmouseup),links.Network.preventDefault(t)},links.Network.Popup=function(t,i,e,s){this.container=t?t:document.body,this.x=0,this.y=0,this.padding=5,void 0!==i&&void 0!==e&&this.setPosition(i,e),void 0!==s&&this.setText(s),this.frame=document.createElement("div");var o=this.frame.style;o.position="absolute",o.visibility="hidden",o.border="1px solid #666",o.color="black",o.padding=this.padding+"px",o.backgroundColor="#FFFFC6",o.borderRadius="3px",o.MozBorderRadius="3px",o.WebkitBorderRadius="3px",o.boxShadow="3px 3px 10px rgba(128, 128, 128, 0.5)",o.whiteSpace="nowrap",this.container.appendChild(this.frame)},links.Network.Popup.prototype.setPosition=function(t,i){this.x=parseInt(t),this.y=parseInt(i)},links.Network.Popup.prototype.setText=function(t){this.frame.innerHTML=t},links.Network.Popup.prototype.show=function(t){if(void 0===t&&(t=!0),t){var i=this.frame.clientHeight,e=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,r=this.y-i;r+i+this.padding>s&&(r=s-i-this.padding),r<this.padding&&(r=this.padding);var n=this.x;n+e+this.padding>o&&(n=o-e-this.padding),n<this.padding&&(n=this.padding),this.frame.style.left=n+"px",this.frame.style.top=r+"px",this.frame.style.visibility="visible"}else this.hide()},links.Network.Popup.prototype.hide=function(){this.frame.style.visibility="hidden"},links.events=links.events||{listeners:[],indexOf:function(t){for(var i=this.listeners,e=0,s=this.listeners.length;s>e;e++){var o=i[e];if(o&&o.object==t)return e}return-1},addListener:function(t,i,e){var s=this.indexOf(t),o=this.listeners[s];o||(o={object:t,events:{}},this.listeners.push(o));var r=o.events[i];r||(r=[],o.events[i]=r),-1==r.indexOf(e)&&r.push(e)},removeListener:function(t,i,e){var s=this.indexOf(t),o=this.listeners[s];if(o){var r=o.events[i];if(r){var n=r.indexOf(e);-1!=n&&r.splice(n,1),0==r.length&&delete o.events[i]}var a=0,h=o.events;for(var l in h)h.hasOwnProperty(l)&&a++;0==a&&delete this.listeners[s]}},removeAllListeners:function(){this.listeners=[]},trigger:function(t,i,e){var s=this.indexOf(t),o=this.listeners[s];if(o){var r=o.events[i];if(r)for(var n=0,a=r.length;a>n;n++)r[n](e)}}},CanvasRenderingContext2D.prototype.circle=function(t,i,e){this.beginPath(),this.arc(t,i,e,0,2*Math.PI,!1)},CanvasRenderingContext2D.prototype.square=function(t,i,e){this.beginPath(),this.rect(t-e,i-e,2*e,2*e)},CanvasRenderingContext2D.prototype.triangle=function(t,i,e){this.beginPath();var s=2*e,o=s/2,r=Math.sqrt(3)/6*s,n=Math.sqrt(s*s-o*o);this.moveTo(t,i-(n-r)),this.lineTo(t+o,i+r),this.lineTo(t-o,i+r),this.lineTo(t,i-(n-r)),this.closePath()
},CanvasRenderingContext2D.prototype.triangleDown=function(t,i,e){this.beginPath();var s=2*e,o=s/2,r=Math.sqrt(3)/6*s,n=Math.sqrt(s*s-o*o);this.moveTo(t,i+(n-r)),this.lineTo(t+o,i-r),this.lineTo(t-o,i-r),this.lineTo(t,i+(n-r)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(t,i,e){this.beginPath();for(var s=0;10>s;s++){var o=s%2===0?1.3*e:.5*e;this.lineTo(t+o*Math.sin(2*s*Math.PI/10),i-o*Math.cos(2*s*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(t,i,e,s,o){var r=Math.PI/180;0>e-2*o&&(o=e/2),0>s-2*o&&(o=s/2),this.beginPath(),this.moveTo(t+o,i),this.lineTo(t+e-o,i),this.arc(t+e-o,i+o,o,270*r,360*r,!1),this.lineTo(t+e,i+s-o),this.arc(t+e-o,i+s-o,o,0,90*r,!1),this.lineTo(t+o,i+s),this.arc(t+o,i+s-o,o,90*r,180*r,!1),this.lineTo(t,i+o),this.arc(t+o,i+o,o,180*r,270*r,!1)},CanvasRenderingContext2D.prototype.ellipse=function(t,i,e,s){var o=.5522848,r=e/2*o,n=s/2*o,a=t+e,h=i+s,l=t+e/2,d=i+s/2;this.beginPath(),this.moveTo(t,d),this.bezierCurveTo(t,d-n,l-r,i,l,i),this.bezierCurveTo(l+r,i,a,d-n,a,d),this.bezierCurveTo(a,d+n,l+r,h,l,h),this.bezierCurveTo(l-r,h,t,d+n,t,d)},CanvasRenderingContext2D.prototype.database=function(t,i,e,s){var o=1/3,r=e,n=s*o,a=.5522848,h=r/2*a,l=n/2*a,d=t+r,p=i+n,f=t+r/2,c=i+n/2,u=i+(s-n/2),k=i+s;this.beginPath(),this.moveTo(d,c),this.bezierCurveTo(d,c+l,f+h,p,f,p),this.bezierCurveTo(f-h,p,t,c+l,t,c),this.bezierCurveTo(t,c-l,f-h,i,f,i),this.bezierCurveTo(f+h,i,d,c-l,d,c),this.lineTo(d,u),this.bezierCurveTo(d,u+l,f+h,k,f,k),this.bezierCurveTo(f-h,k,t,u+l,t,u),this.lineTo(t,c)},CanvasRenderingContext2D.prototype.arrow=function(t,i,e,s){var o=t-s*Math.cos(e),r=i-s*Math.sin(e),n=t-.9*s*Math.cos(e),a=i-.9*s*Math.sin(e),h=o+s/3*Math.cos(e+.5*Math.PI),l=r+s/3*Math.sin(e+.5*Math.PI),d=o+s/3*Math.cos(e-.5*Math.PI),p=r+s/3*Math.sin(e-.5*Math.PI);this.beginPath(),this.moveTo(t,i),this.lineTo(h,l),this.lineTo(n,a),this.lineTo(d,p),this.closePath()},links.Network.util={},links.Network.util.parseDOT=function(t){function i(t){return" "==t||"	"==t||"\n"==t||"\r"==t}function e(t){return-1!="[]{}();,=->".indexOf(t)}function s(){u++,k=t[u]}function o(){return"(char "+u+")"}function r(){for(;k&&i(k);)s();var e=t[u+1],o=t[u-1],n=k+e;if("/*"==n){for(;k&&("*"!=k||"/"!=t[u+1]);)s();s(),s(),r()}else if("//"==n||"#"==k&&"\n"==o){for(;k&&"\n"!=k;)s();s(),r()}}function n(){r();var t="";if('"'==k){for(s();k&&'"'!=k;)t+=k,s();s()}else{for(;k&&!i(k)&&!e(k);)t+=k,s();var o=Number(t);isNaN(o)?"true"==t?t=!0:"false"==t?t=!1:"null"==t&&(t=null):t=o}return t}function a(){if(r(),'"'==k)return n();var t=n();if(void 0!=t){var i=Number(t);isNaN(i)?"true"==t?t=!0:"false"==t?t=!1:"null"==t&&(t=null):t=i}return t}function h(){if(r(),"["==k){s();for(var t={};k&&"]"!=k;){r();var i=n();if(!i)throw new SyntaxError("Attribute name expected "+o());if(r(),"="!=k)throw new SyntaxError("Equal sign = expected "+o());s();var e=a();if(!e)throw new SyntaxError("Attribute value expected "+o());t[i]=e,r(),","==k&&s()}return s(),t}return void 0}function l(){if(r(),"-"==k){if(s(),">"==k||"-"==k){var t="-"+k;return s(),t}throw new SyntaxError('Arrow "->" or "--" expected '+o())}return void 0}function d(){return r(),";"==k?(s(),";"):void 0}function p(t,i){if(t&&i)for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])}function f(t,i){var e={id:String(t),attr:i||{}};g[t]?p(g[t].attr,e.attr):g[t]=e}function c(t,i,e,s){v.push({from:String(t),to:String(i),type:e,attr:s||{}})}var u=-1,k="",g={},v=[];for(s();k&&"{"!=k;)s();if("{"!=k)throw new SyntaxError("Invalid data. Curly bracket { expected "+o());for(s();k&&"}"!=k;){var w=n();if(void 0==w)throw new SyntaxError("String with id expected "+o());var m=h();f(w,m);for(var y=l();y;){var N=w;if(w=n(),void 0==w)throw new SyntaxError("String with id expected "+o());f(w),m=h(),c(N,w,y,m),y=l()}d(),r()}if("}"!=k)throw new SyntaxError("Invalid data. Curly bracket } expected");var x=t.indexOf("{"),_=t.indexOf("}",x),b=-1!=x&&-1!=_?t.substring(x+1,_):void 0;if(!b)throw new Error("Invalid data. no curly brackets containing data found");var C=[];for(w in g)g.hasOwnProperty(w)&&C.push(g[w]);return{nodes:C,edges:v}},links.Network.util.DOTToNetwork=function(t){function i(t,i,e){for(var s in i)!i.hasOwnProperty(s)||e&&-1!=e.indexOf(s)||(t[s]=i[s]);t.label&&(t.text=t.label,delete t.label),t.shape&&(t.style=t.shape,delete t.shape)}var e=links.Network.util.parseDOT(t),s={nodes:[],edges:[],options:{nodes:{},links:{}}};return e.nodes.forEach(function(t){if("graph"==t.id.toLowerCase())i(s.options,t.attr);else if("node"==t.id.toLowerCase())i(s.options.nodes,t.attr);else if("edge"==t.id.toLowerCase())i(s.options.links,t.attr);else{var e={};e.id=t.id,e.text=t.id,i(e,t.attr),s.nodes.push(e)}}),e.edges.forEach(function(t){var e={};e.from=t.from,e.to=t.to,e.text=t.id,e.style="->"==t.type?"arrow-end":"line",i(e,t.attr),s.edges.push(e)}),s};
